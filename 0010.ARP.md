## 🔍 ARP (Address Resolution Protocol)

**ARP**는 네트워크 계층 주소인 **IP 주소**를 데이터 링크 계층 주소인 **MAC 주소**로 변환하는 데 사용되는 프로토콜입니다.

네트워크 통신은 2계층(데이터 링크)의 MAC 주소와 3계층(네트워크)의 IP 주소가 모두 필요합니다. IP 주소는 통신 대상을 식별하고 라우팅하는 데 사용되지만, 실제 데이터를 물리적으로 전달하기 위해서는 동일 네트워크 내에서 장치를 식별하는 MAC 주소가 필수적입니다.

---

### 1. ARP의 작동 원리

ARP는 기본적으로 동일한 로컬 네트워크(세그먼트) 내에서 작동합니다.

1.  **ARP Request (질문):**
    * 통신을 원하는 호스트 A는 목적지 호스트 B의 **IP 주소는 알고 있지만, MAC 주소를 모를 때** ARP Request를 보냅니다.
    * 이 요청은 네트워크 전체(브로드캐스트)로 전송되며, 내용은 "IP 주소가 **192.168.1.10**인 장치야, 너의 MAC 주소는 무엇이니?"와 같습니다.
    * 패킷의 목적지 MAC 주소는 **FF:FF:FF:FF:FF:FF** (브로드캐스트 주소)로 설정됩니다.

2.  **ARP Reply (응답):**
    * 네트워크의 모든 장치는 이 요청을 받지만, 자신의 IP 주소와 요청된 IP 주소가 일치하는 **호스트 B**만 응답합니다.
    * 호스트 B는 자신의 **MAC 주소**가 포함된 **ARP Reply**를 호스트 A에게 유니캐스트(1:1 전송)로 보냅니다.
    * 응답 내용은 "내가 192.168.1.10이야, 내 MAC 주소는 **00:1A:2B:3C:4D:5E**야"와 같습니다.

3.  **ARP 캐싱:**
    * 호스트 A는 이 응답을 받으면, 호스트 B의 IP 주소와 MAC 주소 쌍을 자신의 **ARP 캐시 테이블**에 일정 시간 동안 저장합니다.
    * 다음 통신부터는 이 캐시 테이블을 먼저 확인하여, 불필요한 ARP Request를 줄이고 성능을 향상시킵니다.



---

### 2. 역ARP (RARP)와 프록시 ARP

| 용어 | 풀이 및 역할 |
| :--- | :--- |
| **RARP (Reverse ARP)** | **자신의 MAC 주소**를 이용해 **자신의 IP 주소**를 알아내기 위한 프로토콜이었습니다. 디스크가 없는 워크스테이션에서 주로 사용되었으나, 현재는 **DHCP**로 대체되어 거의 사용되지 않습니다. |
| **Proxy ARP** | 라우터가 다른 네트워크에 있는 호스트에 대한 ARP 요청에 **자신의 MAC 주소**로 대신 응답하는 기술입니다. 이는 실제 목적지가 다른 네트워크에 있지만, 요청한 호스트에게는 마치 같은 네트워크에 있는 것처럼 보이게 하여 통신을 가능하게 합니다. |

---

### 💡 실전 팁: ARP Spoofing과 보안

ARP는 인증 과정 없이 응답을 신뢰하기 때문에 보안에 취약합니다.

* **ARP 스푸핑(Spoofing):** 공격자가 ARP Reply를 위조하여, 특정 IP 주소(예: 게이트웨이)에 대한 MAC 주소 정보를 자신의 MAC 주소로 속여 전송하는 공격입니다.
* **결과:** 네트워크 트래픽이 공격자에게 우회되거나(MITM, Man-In-The-Middle), 통신이 마비될 수 있습니다. 네트워크 보안에서 ARP 관련 방어는 필수적입니다.
